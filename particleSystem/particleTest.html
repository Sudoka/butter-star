<html>
	<head>
		<title>My first Three.js app</title>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>body {
				background-color: #000000;
				margin: 0px;
				overflow: hidden;
				font-family:Monospace;
				font-size:13px;
				text-align:center;
				font-weight: bold;
				text-align:center;
			}</style>
	</head>
	<body>
		<script src="three.js"></script>
		<script src="stats.min.js"></script>
		<script>

			window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function(/* function */ callback, /* DOMElement */ element){
                window.setTimeout(callback, 1000 / 60);
              };
   			 })();
   			 var scene, renderer, camera, pMaterial;
   			 init();
   			 renderFrame();

   			 function init()
   			 {
			var container = document.createElement('div');
			document.body.appendChild(container);


			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
			camera.position.z = 100;

			renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);


			container.appendChild(renderer.domElement);

			stats = new Stats();
			stats.domElement.style.position = 'absolute';
			stats.domElement.style.top = '5px';
			stats.domElement.style.right = '5px';
			container.appendChild( stats.domElement );

			// create the particle variables
			var particleCount = 100000,
			    particles = new THREE.Geometry();
			    pMaterial =
			      new THREE.ParticleBasicMaterial({
			        size: 0.9,
			      });

			// now create the individual particles
			for(var p = 0; p < particleCount; p++) {

			  // create a particle with random
			  // position values, -250 -> 250
			  var pX = Math.random() * 500 - 250,
			      pY = Math.random() * 500 - 250,
			      pZ = Math.random() * 500 - 250,
			      particle = new THREE.Vector3(pX, pY, pZ);

			  // add it to the geometry
			  particles.vertices.push(particle);
			}

			// create the particle system
			var particleSystem =
			  new THREE.ParticleSystem(
			    particles,
			    pMaterial);

			var particleSystem2 = new THREE.ParticleSystem(particles, pMaterial);
			// add it to the scene
			//particleSystem.sortParticles = true;
			scene.add(particleSystem);
			//scene.add(particleSystem2);

		}
			function renderFrame() {
				//particleSystem.rotation.y += 0.01;
				//particleSystem.geometry.__dirtyVertices = true;
				//camera.lookAt( scene.position );
				update();

				renderer.render(scene, camera);

				stats.update();
				requestAnimationFrame(renderFrame);
			}

			function update()
			{
				var time = Date.now() * 0.00005;
				camera.lookAt( scene.position );
				scene.children[0].rotation.y += 0.01;
				color = [0.90, 1, 0.5];
				var h = ( 360 * ( color[0] + time ) % 360 ) / 360;
					pMaterial.color.setHSL( h, color[1], color[2] );

			}
			
		</script>
	</body>
</html>